#!/bin/bash

set -e

TYPE=$1
ID=$2

if [ -z "$ID" ] || [ -z "$TYPE" ]; then
  echo "Usage: $0 <editor|enclave> <instance id>"
  exit 1
fi

IP=`aws ec2 describe-instances \
  --filters "Name=tag:Name,Values=${TYPE}-${ID}" "Name=instance-state-name,Values=running" \
  --query 'Reservations[*].Instances[*].[PublicIpAddress]' \
  --output text`

echo $IP
